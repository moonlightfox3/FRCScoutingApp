<!doctype html>
<title>Select Year</title>
<link rel="icon" href="./icons/icon.svg">
<link rel="apple-touch-icon" sizes="1024x1024" href="./icons/apple-touch-icon-1024x1024.png">
<link rel="manifest" href="./manifest.json">
<link rel="stylesheet" href="./libs/style.css">
<link rel="stylesheet" href="./libs/index-style.css">
<script src="./libs/elements.js"></script>

<div id="yearsEl"></div>

<script src="./libs/swrun.js"></script>
<script src="./libs/profile.js"></script>
<script src="./libs/gamepads.js"></script>
<script src="./libs/gamepadControl.js"></script>
<script src="./libs/install.js"></script>
<script src="./libs/github.js"></script>
<script src="./year-libs/keys.js"></script>
<script>
    createProfileMenus()
    getGithubData(true)
    
    const years = {
        2025: "Reefscape",
        2026: "Rebuilt",
    }
    const pitYears = {
        2026: "Rebuilt",
    }
    const unreleasedYears = []
    const unavailableYears = []
    const noImgYears = []

    // Create button elements automatically
    const currentYear = new Date().getFullYear()
    let currentYearElIdx = null
    function displayYears (years, isPit) {
        yearsEl.append(`${isPit ? "Pit" : "Match"} scouting:`)
        let br = document.createElement("div")
        br.className = "break"
        yearsEl.append(br)

        for (let i = 0; i < Object.keys(years).length; i++) {
            let year = Object.keys(years)[i]
            let name = years[year]

            let a = document.createElement("a")
            a.className = "year-link"
            a.href = `./year${isPit ? "-pit" : ""}/${name}.html`
            let button = document.createElement("button")
            button.className = "year"
            button.id = `${year}`
            button.innerText = `${name} (${year})`
            if (currentYear == +year) button.classList.add("current")
            if (unreleasedYears.includes(+year)) button.classList.add("unreleased")
            button.disabled = unavailableYears.includes(+year)

            if (!noImgYears.includes(+year)) {
                let img = document.createElement("img")
                img.className = "year-img"
                img.src = `./year-img/${name}.png`
                button.append(img)
            }
            
            a.append(button)
            yearsEl.append(a)
            if (currentYear == +year) {
                button.focus()
                currentYearElIdx = i
            }
        }
        let br2 = document.createElement("div")
        br2.className = "break"
        br2.classList.add("large")
        yearsEl.append(br2)
    }
    displayYears(years, false)
    displayYears(pitYears, true)

    // Allow scrolling the page to move the status bar off the year buttons
    document.body.append(document.createElement("br"))
    document.body.append(document.createElement("br"))

    // Setup
    gamepadElCursorInit(
        true,
        document.querySelectorAll("button"),
        el => el.style.color = "gray",
        el => el.style.color = "black",
        el => el.click(),
        currentYearElIdx,
    )
    displayInstallButton()
</script>
